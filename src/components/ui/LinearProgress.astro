---
// src/components/ui/LinearProgress.astro
/**
 * Material Design 3 Linear Progress Indicator
 */

export interface Props {
  value?: number;
  indeterminate?: boolean;
  class?: string;
}

const {
  value,
  indeterminate = false,
  class: className = '',
} = Astro.props;

const progressValue = value !== undefined ? Math.min(100, Math.max(0, value)) : 0;
---

<div
  class:list={[
    'linear-progress',
    { 'linear-progress-indeterminate': indeterminate },
    className,
  ]}
  role="progressbar"
  aria-valuemin="0"
  aria-valuemax="100"
  aria-valuenow={indeterminate ? undefined : progressValue}
>
  <div class="linear-progress-track">
    {indeterminate ? (
      <div class="linear-progress-bar linear-progress-bar-indeterminate"></div>
    ) : (
      <div 
        class="linear-progress-bar" 
        style={`transform: scaleX(${progressValue / 100})`}
      ></div>
    )}
  </div>
</div>

<style>
  .linear-progress {
    width: 100%;
    height: 4px;
    overflow: hidden;
    position: relative;
  }

  .linear-progress-track {
    width: 100%;
    height: 100%;
    background-color: var(--md-sys-color-surface-container-highest);
    border-radius: 2px;
    position: relative;
    overflow: hidden;
  }

  .linear-progress-bar {
    height: 100%;
    background-color: var(--md-sys-color-primary);
    transform-origin: left;
    transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 2px;
  }

  /* Indeterminate animation */
  .linear-progress-bar-indeterminate {
    width: 40%;
    animation: linear-progress-indeterminate 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  }

  @keyframes linear-progress-indeterminate {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(350%);
    }
  }
</style>
